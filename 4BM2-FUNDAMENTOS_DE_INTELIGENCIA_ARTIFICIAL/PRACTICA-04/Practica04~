% Base de conocimiento, Coloque aqui los predicados para representar el
% conocimiento
% x(nombre,calorias)
%fruta(_,_).
%proteina(_,_).
%cereal(_,_).
%verdura(_,_).
%carbohidrato(_,_).
%grasa_saludable(_,_).

% Frutas

fruta('Pomelo', 30).
fruta('Sandía', 30).
fruta('Melón', 31).
fruta('Fresas', 36).
fruta('Grosella', 37).
fruta('Mora', 37).
fruta('Limón', 39).
fruta('Frambuesa', 40).
fruta('Mandarina', 40).
fruta('Arándanos', 41).
fruta('Zumo de Naranja', 42).
fruta('Naranja', 44).
fruta('Ciruela', 44).
fruta('Papaya', 45).
fruta('Zumo de fruta', 45).
fruta('Cereza', 47).
fruta('Kiwi', 51).
fruta('Piña', 51).
fruta('Manzana', 52).
fruta('Mango', 57).
fruta('Pera', 61).
fruta('Caqui', 64).
fruta('Nectarina', 64).
fruta('Granada', 65).
fruta('Chirimoya', 78).
fruta('Higos', 80).
fruta('Uva', 81).
fruta('Piña en almíbar', 84).
fruta('Plátano', 90).
fruta('Nísperos', 97).
fruta('Higos secos', 275).
fruta('Dátil', 279).
fruta('Ciruela seca', 290).
fruta('Dátil seco', 306).
fruta('Uva pasa', 324).
fruta('Coco', 646).

% Proteínas
proteina('Ternera, riñón', 86).
proteina('Cordero pierna', 98).
proteina('Tripas', 100).
proteina('Cordero lechón', 105).
proteina('Jabalí', 107).
proteina('Codorniz y perdiz', 114).
proteina('Ciervo', 120).
proteina('Perdiz', 120).
proteina('Ternera, sesos', 125).
proteina('Jamón cocido', 126).
proteina('Cabrito', 127).
proteina('Vacuno, Hígado', 129).
proteina('Pollo, Hígado', 129).
proteina('Cordero, hígado', 132).
proteina('Pollo', 134).
proteina('Pavo, Pechuga', 134).
proteina('Ternera, hígado', 140).
proteina('Faisán', 144).
proteina('Cerdo, hígado', 153).
proteina('Conejo, liebre', 162).
proteina('Ternera, chuleta', 168).
proteina('Ternera', 181).
proteina('Pollo, Muslo', 186).
proteina('Pavo, Muslo', 186).
proteina('Lengua de vaca', 191).
proteina('Pato', 200).
proteina('Ternera, lengua', 207).
proteina('Cerdo, lomo', 208).
proteina('Cordero, costillas', 215).
proteina('Hamburguesa', 230).
proteina('Mortadela', 265).
proteina('Jamón York', 289).
proteina('Ternera, solomillo', 290).
proteina('Pies de cerdo', 290).
proteina('Salchichón', 294).
proteina('Jamón crudo', 296).
proteina('Salchicha Frankfurt', 315).
proteina('Salami', 325).
proteina('Butifarra, salchicha fresca', 326).
proteina('Butifarra, salchicha fresca', 326).
proteina('Cerdo, chuleta', 330).
proteina('Gallina', 369).
proteina('Jamón', 380).
proteina('Lomo embuchado', 380).
proteina('Butifarra cocida', 390).
proteina('Tira de asado', 401).
proteina('Chorizo', 468).
proteina('Foie-Gras', 518).
proteina('Chicharrón', 601).
proteina('Bacon (Panceta ahumada)', 665).

% Cereales
cereal('Pan de centeno', 241).
cereal('Arroz blanco', 354).
cereal('Arroz integral', 350).
cereal('Avena', 367).
cereal('Cebada', 373).
cereal('Centeno', 350).
cereal('Cereales con chocolate', 358).
cereal('Cereales desayuno, con miel', 386).
cereal('Copos de maíz', 350).
cereal('Harina de maíz', 349).
cereal('Harina de trigo integral', 340).
cereal('Harina de trigo refinada', 353).
cereal('Pan de trigo blanco', 255).
cereal('Pan de trigo integral', 239).
cereal('Pan de trigo molde blanco', 233).
cereal('Pan de trigo molde integral', 216).
cereal('Pasta al huevo', 368).
cereal('Pasta de sémola', 361).
cereal('Polenta', 358).
cereal('Sémola de trigo', 368).

% Verduras

verdura('Pepino', 12).
verdura('Hinojo', 16).
verdura('Lechuga', 18).
verdura('Repollo', 19).
verdura('Apio', 20).
verdura('Rábanos', 20).
verdura('Berros', 21).
verdura('Porotos verdes', 21).
verdura('Zumo de tomate', 21).
verdura('Pimiento', 22).
verdura('Endibia', 22).
verdura('Tomates', 22).
verdura('Calabaza', 24).
verdura('Espárragos en lata', 24).
verdura('Espinacas congeladas', 25).
verdura('Espárragos', 26).
verdura('Col', 28).
verdura('Champiñón y otras setas', 28).
verdura('Berenjena', 29).
verdura('Nabos', 29).
verdura('Coliflor', 30).
verdura('Brócoli', 31).
verdura('Calabacín', 31).
verdura('Espinaca', 32).
verdura('Acelgas', 33).
verdura('Rúcula', 37).
verdura('Escarola', 37).
verdura('Cebolla tierna', 39).
verdura('Tomate triturado en conserva', 39).
verdura('Remolacha', 40).
verdura('Zanahoria', 42).
verdura('Puerros', 42).
verdura('Cebolla', 47).
verdura('Soja, Brotes de', 50).
verdura('Col de Bruselas', 54).
verdura('Perejil', 55).
verdura('Alcachofas', 64).
verdura('Habas tiernas', 64).
verdura('Papas cocidas', 86).
verdura('Trufa', 92).
verdura('Ajos', 169).

% Carbohidratos
carbohidrato('Helados de agua', 139).
carbohidrato('Mermeladas sin azúcar', 145).
carbohidrato('Dulce de membrillo', 215).
carbohidrato('Mermeladas con azúcar', 280).
carbohidrato('Miel', 300).
carbohidrato('Cacao en polvo con azúcar instantáneo', 366).
carbohidrato('Caramelos', 378).
carbohidrato('Azúcar', 380).
carbohidrato('Chocolate sin leche', 530).
carbohidrato('Crema chocolate con avellanas', 549).
carbohidrato('Chocolate con leche', 550).

% Grasas saludables
grasa_saludable('Aguacate', 160).
grasa_saludable('Aceite de girasol', 900).
grasa_saludable('Aceite de oliva', 900).
grasa_saludable('Manteca', 670).
grasa_saludable('Mantequilla', 752).
grasa_saludable('Margarina vegetal', 752).


% Ciclo principal

main:-repeat,
      pinta_menu,
      read(Opcion),
      ( (Opcion=1,doImc,fail);
	(Opcion=2,doDieta,fail);
	(Opcion=3,!)).

% Muestra el menu

pinta_menu:-nl,nl,
      writeln('===================================='),
      writeln('         DRA. MIKU HATSUNE'),
      writeln('          Medica Virtual'),
      writeln('   <<  Experta en Nutricion  >>'),
      writeln('===================================='),
      nl,writeln('       MENU PRINCIPAL'),
      nl,write('1 Calcular indice de masa corporal'),
      nl,write('2 Recomendar una dieta saludable'),
      nl,write('3 Salir'),
      nl,write('================================='),
      nl,write('Indique una opcion valida:').

% Regla para calcular IMC

doImc:-nl, write('================================='),nl,
       write('Elegiste: Calculo del Indice de Masa Corporal\n'),nl,
       write('Indique su peso en Kilogramos:'),read(Peso),
       write('Indique su estatura en Metros:'),read(Estatura),Estatura > 0,
       write('Indique su genero (1/masculino, 2/femenino):'),read(Sexo),
       IND is Peso/(Estatura*Estatura),
       nl,format('Su indice de masa corporal es: ~g',IND),
       nl, write('DIAGNOSTICO: '),
        ((Sexo=1,IND<17,write('USTED PADECE DESNUTRICION!'));
	      (Sexo=1,IND>=17,IND<20,write('USTED TIENE BAJO PESO!\n'));
            (Sexo=1,IND>=20,IND<25,write('USTED TIENE PESO NORMAL!\n'));
            (Sexo=1,IND>=25,IND<30,write('USTED TIENE LIGERO SOBREPESO!\n'));
            (Sexo=1,IND>=30,IND<40,write('USTED TIENE OBESIDAD SEVERA!\n'));
            (Sexo=1,IND>=40,write('USTED TIENE OBESIDAD MORBIDA!\n'));
            (Sexo=2,IND<16,write('USTED PADECE DESNUTRICION!'));
            (Sexo=2,IND>=16,IND<20,write('USTED TIENE BAJO PESO!\n'));
            (Sexo=2,IND>=20,IND<24,write('USTED TIENE PESO NORMAL!\n'));
            (Sexo=2,IND>=24,IND<29,write('USTED TIENE LIGERO SOBREPESO!\n'));
            (Sexo=2,IND>=29,IND<37,write('USTED TIENE OBESIDAD SEVERA!\n'));
            (Sexo=2,IND>=37,write('USTED TIENE OBESIDAD MORBIDA!\n'))
         ).



% Regla para recomendar desayuno
% un desayuno debe de tener una fruta, una proteina y un cereal
recomendar_desayuno(CalDesayuno):-
      fruta(X,CalFruta), proteina(Y,CalProteina), cereal(Z,CalCereal),
      CalTotal is CalFruta + CalProteina + CalCereal,
      CalTotal =< CalDesayuno,
      write(' PREPARE AL GUSTO'),
      nl, format('DESAYUNO: ~s, ~s, ~s' , [X,Y,Z]),!.
%=====================================================================

% Regla para recomendar almuerzo
% Un almuerzo no debe de ser tan pesado, por lo que solo pondremos una proteina y una fruta
recomendar_almuerzo(CalAlmuerzo):-
      fruta(X,CalFruta), proteina(Y,CalProteina),
      CalTotal is CalFruta + CalProteina,
      CalTotal =< CalAlmuerzo,
      write(' PREPARE AL GUSTO'),
      nl, format('ALMUERZO: ~s, ~s', [X,Y]),!.

%=====================================================================

% Regla para recomendar comida
% una comida deberia de tener una verdura, una proteina y un carbohidrato y de postre una fruta
recomendar_comida(CalComida):-
      verdura(X,CalVerdura), proteina(Y,CalProteina), carbohidrato(Z,CalCarbohidrato),grasa_saludable(W,CalGrasa),
      CalTotal is CalVerdura + CalProteina + CalCarbohidrato + CalGrasa,
      CalTotal =< CalComida,
      write(' PREPARE AL GUSTO'),
      nl, format('COMIDA: ~s, ~s, ~s, ~s', [X,Y,Z,W]),!.


%=====================================================================

% Regla para recomendar merienda
% una merienda debe de tener  una grasa saludable
recomendar_merienda(CalMerienda):-
      fruta(X,CalFruta),
      CalTotal is CalFruta,
      CalTotal =< CalMerienda,
      write(' PREPARE AL GUSTO'),
      nl, format('MERIENDA: ~s', [X]),!.

%=====================================================================

% Regla para recomendar cena
% Una cena no debe de ser tan pesada, por lo que solo pondremos una proteina y una verdura o una proteina y un carbohidrato

recomendar_cena(CalCena):- proteina(Y,CalProteina), carbohidrato(Z,CalCarbohidrato),
     (CalTotal is CalCarbohidrato + CalProteina,
      CalTotal =< CalCena,
      write(' PREPARE AL GUSTO'),
      nl, format('CENA: ~s, ~s', [Z,Y]),!
      ).
%=====================================================================

% Regla para recomendar dietas
doDieta:-nl, write('================================='),nl,
      nl,writeln('Elegiste: Nutriologo Artificial'),
       write('Indique su peso en Kilogramos:'),read(Peso),
       write('Indique su genero (1/masculino, 2/femenino):'),read(Sexo),
       write('Indique su edad en años:'),read(Edad),
       write('Indique su estatura en Metros:'),read(Estatura),Estatura > 0,
       TALLA is Estatura*100,

% para una dieta se necesita el calculo del gasto metabolico basal (GMB)
% usando la Fórmula Harris-Benedict  que ya toma encuenta el sexo, edad, peso y talla
% Hombres: 66.5 + 13.75 (peso(kg))  + 5.08 (talla (cm))- 6.78 (edad(años))
% Mujeres: 655.1 + 9.56 (peso(kg)) + 1.85 (talla(cm))- 4.68 (edad(años))

% primero para mujeres luego hombres xd
      ((Sexo = 2, GMB is 655.1 + 9.56*Peso + 1.85*TALLA - 4.68*Edad);
      (Sexo = 1, GMB is 66.5 + 13.75*Peso + 5.08*TALLA - 6.78*Edad)
      ),
      nl,format('Su gasto metabolico basal es: ~g',GMB),

% se debe poner el porcentaje de calorias de GMB para cada comida
% desayuno 20%, almuerzo 10%, comida 40%, merienda 10%, cena 20%
      CalDesayuno is GMB*0.2,
      CalAlmuerzo is GMB*0.1,
      CalComida is GMB*0.4,
      CalMerienda is GMB*0.1,
      CalCena is GMB*0.2,
      nl,write('================================='),
      nl, write('Este es su menu recomendado: '),nl,
      recomendar_desayuno(CalDesayuno),nl,
      recomendar_almuerzo(CalAlmuerzo),nl,
      recomendar_comida(CalComida),nl,
      recomendar_merienda(CalMerienda),nl,
      recomendar_cena(CalCena),nl,
      nl,write('================================='),
      nl,write('Gracias por usar el Nutriologo Artificial'),
      nl,write('=================================').
